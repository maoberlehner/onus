!function(n,t){function e(t,e){this.element=t,this.$element=n(t),this.settings=n.extend({},r,e),this._defaults=r,this._name=s,i=this,i.init()}var i,o,s="onus",r={matchMedia:["min-width: 36em"],anchor:"#main-content",inViewportThreshold:0,$spinner:n('<span class="spinner" />')},a=!1,c=n(t).scrollTop(),l=!1;e.prototype={init:function(){o="("+i.settings.matchMedia[0]+")",n.each(i.settings.matchMedia.slice(1),function(){o+=" and ("+this+")"}),n(t).on("load scroll",i.onScroll),i.$element.on("click",function(n){n.preventDefault(),i.loadContent()})},observer:function(){!a&&t.matchMedia(o).matches&&i.inViewport()&&i.loadContent(),l=!1},loadContent:function(){var e=n('<div id="onus-tmp" />');a=!0,i.$element.after(i.settings.$spinner).remove(),e.load(i.element.href+" "+i.settings.anchor,function(){var o=n(e.find(i.settings.anchor).html());i.settings.$spinner.after(o).remove(),n(t).trigger("onus-content-loaded",o)})},inViewport:function(){var e=n(t).height()+c;return e>=i.$element.offset().top-i.settings.inViewportThreshold},requestTick:function(){l||(t.requestAnimationFrame(i.observer),l=!0)},onScroll:function(){c=n(t).scrollTop(),i.requestTick()}},n.fn[s]=function(t){return this.each(function(){n.data(this,"plugin_"+s)||n.data(this,"plugin_"+s,new e(this,t))})}}(jQuery,window,document);